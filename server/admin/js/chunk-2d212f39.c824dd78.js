(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212f39"],{ab35:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"about"},[a("h1",[t._v(t._s(t.id?"编辑":"新建")+"视频")]),a("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("el-form-item",{attrs:{label:"所属分类"}},[a("el-select",{model:{value:t.model.categories,callback:function(e){t.$set(t.model,"categories",e)},expression:"model.categories"}},t._l(t.categories,function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),a("el-form-item",{attrs:{label:"背景图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":function(r){return e.$set(t.model,"banner",r.url)},"before-upload":t.beforeAvatarUpload}},[t.model.banner?a("img",{staticClass:"avatar",attrs:{src:t.model.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"播放量"}},[a("el-input",{model:{value:t.model.viewCounts,callback:function(e){t.$set(t.model,"viewCounts",e)},expression:"model.viewCounts"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{model:{value:t.model.playUrl,callback:function(e){t.$set(t.model,"playUrl",e)},expression:"model.playUrl"}})],1),a("el-form-item",{attrs:{label:"时间"}},[a("el-input",{model:{value:t.model.time,callback:function(e){t.$set(t.model,"time",e)},expression:"model.time"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存\n      ")])],1)],1)],1)},s=[],n=(r("96cf"),r("3b8d")),i={props:{id:{type:String}},data:function(){return{model:{categories:"",title:"",banner:"",viewCounts:"",playUrl:"",time:""},categories:[]}},methods:{beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},save:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.model.categories&&this.model.title&&this.model.banner&&this.model.viewCounts&&this.model.playUrl&&this.model.time){e.next=3;break}return this.$message.warning("请检查必填项是已填"),e.abrupt("return");case 3:if(!this.id){e.next=9;break}return e.next=6,this.$http.put("rest/videos/".concat(this.id),this.model);case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,this.$http.post("rest/videos",this.model);case 11:t=e.sent;case 12:this.$router.push("/videos/list"),200===t.status&&this.$message({type:"success",message:"保存成功"});case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/videos/".concat(this.id));case 2:t=e.sent,this.model=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchCategories:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/categories");case 2:t=e.sent,this.categories=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchCategories(),this.id&&this.fetch()}},l=i,o=r("2877"),u=Object(o["a"])(l,a,s,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d212f39.c824dd78.js.map