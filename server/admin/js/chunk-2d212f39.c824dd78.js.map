{"version":3,"sources":["webpack:///./src/views/Video/VideoEdit.vue?5a6c","webpack:///src/views/Video/VideoEdit.vue","webpack:///./src/views/Video/VideoEdit.vue?eeb9","webpack:///./src/views/Video/VideoEdit.vue"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","id","attrs","label-width","nativeOn","submit","$event","preventDefault","save","label","model","value","callback","$$v","$set","expression","_l","item","key","_id","name","action","uploadUrl","headers","getAuthHeaders","show-file-list","on-success","res","url","before-upload","beforeAvatarUpload","src","banner","type","native-type","staticRenderFns","VideoEditvue_type_script_lang_js_","props","String","data","categories","title","viewCounts","playUrl","time","methods","file","isLt2M","size","$message","error","_save","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","warning","abrupt","$http","put","concat","sent","post","$router","push","status","message","stop","apply","arguments","fetch","_fetch","_callee2","_context2","get","fetchCategories","_fetchCategories","_callee3","_context3","created","Video_VideoEditvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d212f39.c824dd78.js","sourcesContent":["var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('h1',[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"视频\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_c('el-form-item',{attrs:{\"label\":\"所属分类\"}},[_c('el-select',{model:{value:(_vm.model.categories),callback:function ($$v) {_vm.$set(_vm.model, \"categories\", $$v)},expression:\"model.categories\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{model:{value:(_vm.model.title),callback:function ($$v) {_vm.$set(_vm.model, \"title\", $$v)},expression:\"model.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"背景图\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"headers\":_vm.getAuthHeaders(),\"show-file-list\":false,\"on-success\":function (res) { return this$1.$set(_vm.model, 'banner', res.url); },\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.model.banner)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.model.banner}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"播放量\"}},[_c('el-input',{model:{value:(_vm.model.viewCounts),callback:function ($$v) {_vm.$set(_vm.model, \"viewCounts\", $$v)},expression:\"model.viewCounts\"}})],1),_c('el-form-item',{attrs:{\"label\":\"链接\"}},[_c('el-input',{model:{value:(_vm.model.playUrl),callback:function ($$v) {_vm.$set(_vm.model, \"playUrl\", $$v)},expression:\"model.playUrl\"}})],1),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('el-input',{model:{value:(_vm.model.time),callback:function ($$v) {_vm.$set(_vm.model, \"time\", $$v)},expression:\"model.time\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"保存\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"about\">\r\n    <h1>{{id ? '编辑' : '新建'}}视频</h1>\r\n    <el-form label-width=\"120px\"\r\n             @submit.native.prevent=\"save\">\r\n      <!-- 所属分类 -->\r\n      <el-form-item label=\"所属分类\">\r\n        <el-select v-model=\"model.categories\">\r\n          <el-option v-for=\"item in categories\"\r\n                     :key=\"item._id\"\r\n                     :label=\"item.name\"\r\n                     :value=\"item._id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <!-- 标题 -->\r\n      <el-form-item label=\"标题\">\r\n        <el-input v-model=\"model.title\"></el-input>\r\n      </el-form-item>\r\n      <!-- 背景图 -->\r\n      <el-form-item label=\"背景图\">\r\n        <el-upload class=\"avatar-uploader\"\r\n                   :action=\"uploadUrl\"\r\n                   :headers=\"getAuthHeaders()\"\r\n                   :show-file-list=\"false\"\r\n                   :on-success=\"res => this.$set(model, 'banner', res.url)\"\r\n                   :before-upload=\"beforeAvatarUpload\">\r\n          <img v-if=\"model.banner\"\r\n               :src=\"model.banner\"\r\n               class=\"avatar\" />\r\n          <i v-else\r\n             class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <!-- 播放量 -->\r\n      <el-form-item label=\"播放量\">\r\n        <el-input v-model=\"model.viewCounts\"></el-input>\r\n      </el-form-item>\r\n      <!-- 链接 -->\r\n      <el-form-item label=\"链接\">\r\n        <el-input v-model=\"model.playUrl\"></el-input>\r\n      </el-form-item>\r\n      <!-- 时间 -->\r\n      <el-form-item label=\"时间\">\r\n        <el-input v-model=\"model.time\"></el-input>\r\n      </el-form-item>\r\n      <!-- 保存按钮 -->\r\n      <el-form-item>\r\n        <el-button type=\"primary\"\r\n                   native-type=\"submit\">保存\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    id: { type: String }\r\n  },\r\n  data() {\r\n    return {\r\n      model: {\r\n        categories: \"\",\r\n        title: \"\",\r\n        banner: \"\",\r\n        viewCounts: \"\",\r\n        playUrl: \"\",\r\n        time: \"\"\r\n      },\r\n      categories: []\r\n    };\r\n  },\r\n  methods: {\r\n    // 校验上传图片大小\r\n    beforeAvatarUpload(file) {\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isLt2M;\r\n    },\r\n    async save() {\r\n      if (\r\n        !this.model.categories ||\r\n        !this.model.title ||\r\n        !this.model.banner ||\r\n        !this.model.viewCounts ||\r\n        !this.model.playUrl ||\r\n        !this.model.time\r\n      ) {\r\n        this.$message.warning(\"请检查必填项是已填\");\r\n        return;\r\n      }\r\n      let res;\r\n      if (this.id) {\r\n        // 编辑视频\r\n        res = await this.$http.put(`rest/videos/${this.id}`, this.model);\r\n      } else {\r\n        // 新增视频\r\n        res = await this.$http.post(\"rest/videos\", this.model);\r\n      }\r\n      this.$router.push(\"/videos/list\");\r\n      if (res.status === 200) {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"保存成功\"\r\n        });\r\n      }\r\n    },\r\n    // 编辑页面反显分类数据\r\n    async fetch() {\r\n      const res = await this.$http.get(`rest/videos/${this.id}`);\r\n      this.model = res.data;\r\n    },\r\n    // 查询所有分类数据\r\n    async fetchCategories() {\r\n      const res = await this.$http.get(\"rest/categories\");\r\n      this.categories = res.data;\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.fetchCategories();\r\n    // id存在时才请求数据\r\n    this.id && this.fetch();\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoEdit.vue?vue&type=template&id=7b00df06&\"\nimport script from \"./VideoEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}