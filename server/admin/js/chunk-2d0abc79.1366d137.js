(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0abc79"],{1774:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=this,a=t.$createElement,l=t._self._c||a;return l("div",{staticClass:"about"},[l("h1",[t._v(t._s(t.id?"编辑":"新建")+"英雄")]),l("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}}},[l("el-tabs",{attrs:{type:"border-card",value:"basic"}},[l("el-tab-pane",{attrs:{label:"基础信息",name:"basic"}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),l("el-form-item",{attrs:{label:"称号"}},[l("el-input",{model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}})],1),l("el-form-item",{attrs:{label:"头像"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t.model,"avatar",a.url)},"before-upload":t.beforeAvatarUpload}},[t.model.avatar?l("img",{staticClass:"avatar",attrs:{src:t.model.avatar}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-form-item",{attrs:{label:"背景图"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return e.$set(t.model,"banner",a.url)},"before-upload":t.beforeAvatarUpload}},[t.model.banner?l("img",{staticClass:"avatar",attrs:{src:t.model.banner}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-form-item",{attrs:{label:"英雄类型"}},[l("el-select",{attrs:{multiple:""},model:{value:t.model.categories,callback:function(e){t.$set(t.model,"categories",e)},expression:"model.categories"}},t._l(t.categories,function(e){return l("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})}),1)],1),l("el-form-item",{attrs:{label:"难度"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.difficult,callback:function(e){t.$set(t.model.scores,"difficult",e)},expression:"model.scores.difficult"}})],1),l("el-form-item",{attrs:{label:"技能"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.skills,callback:function(e){t.$set(t.model.scores,"skills",e)},expression:"model.scores.skills"}})],1),l("el-form-item",{attrs:{label:"攻击"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.attack,callback:function(e){t.$set(t.model.scores,"attack",e)},expression:"model.scores.attack"}})],1),l("el-form-item",{attrs:{label:"生存"}},[l("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:t.model.scores.survive,callback:function(e){t.$set(t.model.scores,"survive",e)},expression:"model.scores.survive"}})],1),l("el-form-item",{attrs:{label:"召唤师技能"}},[l("el-select",{attrs:{multiple:"",filterable:"",clearable:"","multiple-limit":2},model:{value:t.model.summonerSkills,callback:function(e){t.$set(t.model,"summonerSkills",e)},expression:"model.summonerSkills"}},t._l(t.summonerSkillsData,function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"铭文"}},[l("el-select",{attrs:{multiple:"",filterable:"",clearable:"","multiple-limit":3},model:{value:t.model.inscriptions,callback:function(e){t.$set(t.model,"inscriptions",e)},expression:"model.inscriptions"}},t._l(t.inscriptionsData,function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"顺风出装"}},[l("el-select",{attrs:{multiple:"",filterable:"",clearable:""},model:{value:t.model.items1,callback:function(e){t.$set(t.model,"items1",e)},expression:"model.items1"}},t._l(t.items,function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"顺风出装tips"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入顺风出装tips"},model:{value:t.model.items1Tips,callback:function(e){t.$set(t.model,"items1Tips",e)},expression:"model.items1Tips"}})],1),l("el-form-item",{attrs:{label:"逆风出装"}},[l("el-select",{attrs:{multiple:"",filterable:"",clearable:""},model:{value:t.model.items2,callback:function(e){t.$set(t.model,"items2",e)},expression:"model.items2"}},t._l(t.items,function(e){return l("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"逆风出装tips"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入逆风出装tips"},model:{value:t.model.items2Tips,callback:function(e){t.$set(t.model,"items2Tips",e)},expression:"model.items2Tips"}})],1),l("el-form-item",{attrs:{label:"使用技巧"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入使用技巧"},model:{value:t.model.usageTips,callback:function(e){t.$set(t.model,"usageTips",e)},expression:"model.usageTips"}})],1),l("el-form-item",{attrs:{label:"对抗技巧"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入对抗技巧"},model:{value:t.model.battleTips,callback:function(e){t.$set(t.model,"battleTips",e)},expression:"model.battleTips"}})],1),l("el-form-item",{attrs:{label:"团队技巧"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入团队技巧"},model:{value:t.model.teamTips,callback:function(e){t.$set(t.model,"teamTips",e)},expression:"model.teamTips"}})],1)],1),l("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[l("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.model.skills.push({})}}},[l("i",{staticClass:"el-icon-plus"}),t._v("添加技能\n        ")]),l("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.model.skills,function(e,a){return l("el-col",{key:a,attrs:{md:12}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{attrs:{placeholder:"请输入技能名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),l("el-form-item",{attrs:{label:"图标"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":function(a){return t.$set(e,"icon",a.url)},"before-upload":t.beforeAvatarUpload,accept:"image/*"}},[e.icon?l("img",{staticClass:"avatar",attrs:{src:e.icon}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-form-item",{attrs:{label:"冷却值"}},[l("el-input",{attrs:{resize:"none",placeholder:"请输入技能冷却值"},model:{value:e.delay,callback:function(a){t.$set(e,"delay",a)},expression:"item.delay"}})],1),l("el-form-item",{attrs:{label:"消耗"}},[l("el-input",{attrs:{resize:"none",placeholder:"请输入技能消耗"},model:{value:e.cost,callback:function(a){t.$set(e,"cost",a)},expression:"item.cost"}})],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入技能描述"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"item.description"}})],1),l("el-form-item",{attrs:{label:"小提示"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入提示语"},model:{value:e.tips,callback:function(a){t.$set(e,"tips",a)},expression:"item.tips"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(){return t.model.skills.splice(a,1)}}},[t._v("删除\n              ")])],1)],1)}),1)],1),l("el-tab-pane",{attrs:{label:"最佳搭档",name:"partners"}},[l("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.model.partners.push({})}}},[l("i",{staticClass:"el-icon-plus"}),t._v("添加搭档\n        ")]),l("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.model.partners,function(e,a){return l("el-col",{key:a,attrs:{md:12}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.hero,callback:function(a){t.$set(e,"hero",a)},expression:"item.hero"}},t._l(t.heroesData,function(e){return l("el-option",{key:e.name,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入英雄描述"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"item.description"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(){return t.model.skills.partners(a,1)}}},[t._v("删除\n              ")])],1)],1)}),1)],1),l("el-tab-pane",{attrs:{label:"被谁克制",name:"foes"}},[l("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.model.foes.push({})}}},[l("i",{staticClass:"el-icon-plus"}),t._v("添加敌人\n        ")]),l("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.model.foes,function(e,a){return l("el-col",{key:a,attrs:{md:12}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.hero,callback:function(a){t.$set(e,"hero",a)},expression:"item.hero"}},t._l(t.heroesData,function(e){return l("el-option",{key:e.name,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入英雄描述"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"item.description"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(){return t.model.foes.splice(a,1)}}},[t._v("删除\n              ")])],1)],1)}),1)],1),l("el-tab-pane",{attrs:{label:"克制谁",name:"restrains"}},[l("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.model.restrains.push({})}}},[l("i",{staticClass:"el-icon-plus"}),t._v("添加克制英雄\n        ")]),l("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},t._l(t.model.restrains,function(e,a){return l("el-col",{key:a,attrs:{md:12}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.hero,callback:function(a){t.$set(e,"hero",a)},expression:"item.hero"}},t._l(t.heroesData,function(e){return l("el-option",{key:e.name,attrs:{label:e.name,value:e._id}})}),1)],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"请输入英雄描述"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"item.description"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(){return t.model.restrains.splice(a,1)}}},[t._v("删除\n              ")])],1)],1)}),1)],1)],1),l("el-form-item",[l("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary","native-type":"submit"}},[t._v("保存\n      ")])],1)],1)],1)},s=[],r=(a("96cf"),a("3b8d")),i={props:{id:{type:String}},data:function(){return{categories:[],items:[],summonerSkillsData:[],inscriptionsData:[],heroesData:[],model:{name:"",title:"",avatar:"",banner:"",scores:{difficult:0,skills:0,attack:0,survive:0},skills:[],partners:[],foes:[],restrain:[],items1:[],items2:[],summonerSkills:[],inscriptions:[],usageTips:"",battleTips:"",teamTips:""}}},methods:{save:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.id){e.next=6;break}return e.next=3,this.$http.put("rest/heroes/".concat(this.id),this.model);case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,this.$http.post("rest/heroes",this.model);case 8:t=e.sent;case 9:this.$router.push("/heroes/list"),200===t.status&&this.$message({type:"success",message:"保存成功"});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/heroes/".concat(this.id));case 2:t=e.sent,this.model=Object.assign({},this.model,t.data);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchCategories:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/categories");case 2:t=e.sent,this.categories=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchItems:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/items");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchSummonerSkills:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/skills");case 2:t=e.sent,this.summonerSkillsData=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchInscriptions:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/inscriptions");case 2:t=e.sent,this.inscriptionsData=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetchHeroes:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/heroes");case 2:t=e.sent,this.heroesData=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleAvatarSuccess:function(e){this.model.avatar=e.url},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t}},created:function(){this.fetchCategories(),this.fetchItems(),this.fetchSummonerSkills(),this.fetchInscriptions(),this.fetchHeroes(),this.id&&this.fetch()}},n=i,o=a("2877"),c=Object(o["a"])(n,l,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0abc79.1366d137.js.map